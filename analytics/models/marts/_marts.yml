version: 2

models:
  - name: fct_dashboard_metrics
    description: Core dashboard metrics for real-time monitoring
    columns:
      - name: metric_date
        description: Date of the metrics
        tests:
          - not_null
      - name: total_sales
        description: Total sales amount
      - name: total_orders
        description: Total number of orders
      - name: avg_order_value
        description: Average order value

  - name: dim_customers
    description: Customer dimension table
    columns:
      - name: customer_id
        description: Unique identifier for the customer
        tests:
          - not_null
          - unique
      - name: customer_name
        description: Customer's name
      - name: customer_segment
        description: Customer segment classification

  - name: fct_recent_transactions
    description: Recent transaction fact table
    columns:
      - name: transaction_id
        description: Unique identifier for the transaction
        tests:
          - not_null
          - unique
      - name: transaction_date
        description: Date of the transaction
      - name: amount
        description: Transaction amount

  - name: fct_sales_trends
    description: Sales trends analysis
    columns:
      - name: trend_date
        description: Date of the trend analysis
        tests:
          - not_null
      - name: sales_amount
        description: Total sales amount
      - name: growth_rate
        description: Sales growth rate

  - name: fct_branch_performance
    description: Branch performance metrics
    columns:
      - name: branch_id
        description: Branch identifier
        tests:
          - not_null
          - relationships:
              to: ref('stg_branches')
              field: branch_id
      - name: performance_date
        description: Date of performance metrics
      - name: daily_revenue
        description: Daily revenue for the branch
      - name: daily_transactions
        description: Number of daily transactions